<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Products</title>
		<%- include('./partials/header.ejs')%>
		<nav>
			<a href="/products">Back to Product Index</a>
		</nav>
	</head>
	<body>
		
		<h1><%=product.name %></h1>
		description: <%=product.description%>
		<br />
		 <img src =<%= product.img %> alt=<%= product.name %>><br />
        price: <% if(product.price > 0) { %>
		<%= product.price %>
		<% } else { %>
			Are you really paying people to get rid of your inventory?
			<% } %>
        <br />
        quantity: <% if(product.qty > 0){ %>
			<%= product.qty %>
		<form action="/products/<%=product._id%>">	
			<input type="hidden" name="update qty" value="<%=product.qty-1%> "/>
			<!-- https://stackoverflow.com/questions/48435948/nodejs-express-html-hidden-input-value-showing-only-first-word -->
			<button type="submit" name="Buy" class="btn">Buy Now</button>
		</form>
		<% } else {%>
			Out of Stock
		<% } %>
		<a href="/products/<%=product._id; %>/edit">Edit</a>
	</body>
</html>